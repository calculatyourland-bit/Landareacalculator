<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Land Area Calculator - Manish Kumar | ‡§ñ‡•á‡§§ ‡§ï‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</title>
    <meta name="description" content="Manish Kumar dwara banaya gaya sabse satik Land Area Calculator. Bigha, Kattha, Dhur aur Square Feet mein khet ka kshetraphal turant nikalein.">
    <meta name="keywords" content="Land Calculator, Manish Kumar, Bigha Kattha Calculator, Area Converter, Bihar Land Calculator, Agriculture Tool">
    <meta name="author" content="Manish Kumar">
    <link rel="canonical" href="https://yourdomain.com/">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Land Area Calculator",
      "url": "https://yourdomain.com",
      "description": "Calculate land area in Bigha, Kattha, Dhur, and Square Feet easily.",
      "applicationCategory": "Tool",
      "operatingSystem": "Web",
      "author": {
        "@type": "Person",
        "name": "Manish Kumar"
      }
    }
    </script>

    <style>
        :root { --primary: #4f46e5; --bg: #f8fafc; --text: #1e293b; --accent: #818cf8; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); padding: 12px; display: flex; flex-direction: column; align-items: center; margin: 0; min-height: 100vh; }
        .box { width: 100%; max-width: 550px; background: #fff; padding: 20px; border-radius: 24px; box-shadow: 0 10px 40px rgba(0,0,0,0.05); box-sizing: border-box; }
        .top { text-align: center; margin-bottom: 20px; }
        h1 { margin: 0; font-size: 32px; color: var(--primary); font-weight: 900; text-transform: uppercase; line-height: 1.2; letter-spacing: -1px; }
        .ad-slot { background: #f1f5f9; margin: 15px 0; display: flex; justify-content: center; align-items: center; min-height: 90px; border-radius: 12px; font-size: 12px; color: #94a3b8; overflow: hidden; }
        .card { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 16px; margin-bottom: 15px; }
        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 10px; }
        .full-width { grid-column: span 2; }
        label { font-size: 13px; font-weight: 600; color: #64748b; display: block; margin-bottom: 4px; }
        
        /* Dropdown with Arrow Styling */
        .select-wrapper { position: relative; width: 100%; }
        select { 
            width: 100%; padding: 12px; border: 1.5px solid #cbd5e1; border-radius: 10px; 
            font-size: 16px; box-sizing: border-box; transition: 0.2s; 
            appearance: none; -webkit-appearance: none; background: #fff;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%2364748b' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C2.185 5.355 2.398 5 2.796 5h10.408c.398 0 .611.355.345.658l-4.796 5.482a.5.5 0 0 1-.708 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat; background-position: right 12px center; padding-right: 35px;
        }
        
        input { width: 100%; padding: 12px; border: 1.5px solid #cbd5e1; border-radius: 10px; font-size: 16px; box-sizing: border-box; transition: 0.2s; }
        input:focus, select:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1); outline: none; }
        
        .btn-group { display: flex; gap: 10px; margin-top: 15px; }
        button { flex: 1; padding: 14px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; transition: 0.2s; font-size: 16px; }
        .calc-btn { background: var(--primary); color: white; }
        .calc-btn:hover { background: #4338ca; }
        .reset-btn { background: #e2e8f0; color: #475569; }
        .pdf-btn { background: #10b981; color: white; margin-top: 10px; width: 100%; display: none; }
        .result-card { display: none; background: #f0f4ff; border-left: 6px solid var(--primary); padding: 16px; border-radius: 12px; margin-top: 20px; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }
        .res-item { display: flex; justify-content: space-between; padding: 9px 0; border-bottom: 1px solid #dce4ff; font-size: 15px; }
        .highlight { color: var(--primary); font-weight: 800; font-size: 17px; }
        .warning-box { background: #fff7ed; color: #9a3412; padding: 12px; border-radius: 10px; font-size: 13px; margin-bottom: 15px; border: 1px solid #fed7aa; }
        .diagram-container { margin-top: 15px; display: flex; flex-direction: column; align-items: center; background: #fff; border-radius: 15px; padding: 20px; border: 2px dashed #cbd5e1; }
        .hist-item { background: #fff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 12px; margin-bottom: 10px; }
        
        /* About Section Styling */
        .about-section { margin-top: 30px; background: #fff; padding: 20px; border-radius: 20px; border: 1px solid #e2e8f0; line-height: 1.6; }
        .about-section h2 { color: var(--primary); font-size: 20px; margin-top: 0; }
        .about-section p { font-size: 14px; color: #475569; }
        .about-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
        .about-item { background: #f8fafc; padding: 10px; border-radius: 10px; font-size: 13px; border-left: 3px solid var(--accent); }

        footer { margin-top: auto; padding: 20px; font-size: 14px; color: #94a3b8; text-align: center; }
        .dev-name { color: #000; font-weight: 900; }
        @media print { .box, footer, .ad-slot { display: none !important; } #resultCard { display: block !important; position: static; width: 100%; border: none; } }
    </style>
</head>
<body>

<main class="box">
    <header class="top">
        <h1>LAND AREA CALCULATOR</h1>
        <p style="font-size: 12px; color: #64748b; margin-top: 5px;">By Manish Kumar</p>
    </header>

    <div class="ad-slot">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
             data-ad-slot="XXXXXXXXXX"
             data-ad-format="horizontal"
             data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <section class="card" style="background: #eff6ff; border-color: #bfdbfe; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <div><label style="color: #1e40af;">‡§≤‡§ó‡•ç‡§ó‡•Ä (‡§π‡§æ‡§• ‡§Æ‡•á‡§Ç)</label><select id="laggi"></select></div>
        <div><label style="color: #1e40af;">‡§á‡§®‡§™‡•Å‡§ü ‡§Ø‡•Ç‡§®‡§ø‡§ü</label>
            <select id="inputUnit" onchange="drawInputs()">
                <option value="feet" selected>‡§´‡•Ä‡§ü (Feet)</option>
                <option value="kadi">‡§ï‡§°‡§º‡•Ä (Links)</option>
                <option value="meter">‡§Æ‡•Ä‡§ü‡§∞ (Meter)</option>
                <option value="guz">‡§ó‡§ú‡§º (Yard)</option>
            </select>
        </div>
    </section>

    <section class="card">
        <label for="shape">‡§ñ‡•á‡§§ ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç</label>
        <select id="shape" onchange="drawInputs()">
            <option value="">-- ‡§ö‡•Å‡§®‡•á‡§Ç --</option>
            <option value="rectangle">‡§Ü‡§Ø‡§§ (Rectangle)</option>
            <option value="square">‡§µ‡§∞‡•ç‡§ó (Square)</option>
            <option value="triangle">‡§§‡•ç‡§∞‡§ø‡§≠‡•Å‡§ú (Triangle)</option>
            <option value="right_triangle">‡§∏‡§Æ‡§ï‡•ã‡§£ ‡§§‡•ç‡§∞‡§ø‡§≠‡•Å‡§ú</option>
            <option value="parallelogram">‡§ö‡§æ‡§∞ ‡§Æ‡•á‡§°‡§º (4 Sides)</option>
            <option value="oval">‡§Ö‡§Ç‡§°‡§æ‡§ï‡§æ‡§∞ (Oval)</option>
            <option value="circle">‡§µ‡•É‡§§‡•ç‡§§ (Circle)</option>
        </select>
        <div id="inputs" class="input-grid"></div>
        <div class="btn-group">
            <button class="calc-btn" onclick="calculate()">‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>
            <button class="reset-btn" onclick="resetAll()">‡§∞‡•Ä‡§∏‡•á‡§ü</button>
        </div>
    </section>

    <div class="result-card" id="resultCard">
        <h3 style="margin:0 0 10px 0; font-size:18px; color: var(--primary);">üìê ‡§ó‡§£‡§®‡§æ ‡§ï‡§æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ</h3>
        <div id="warningArea"></div>
        <div id="resultContent"></div>
        <div class="diagram-container">
            <span style="font-size: 12px; color: #94a3b8; margin-bottom: 10px; font-weight: bold;">‡§ñ‡•á‡§§ ‡§ï‡§æ ‡§®‡§ï‡•ç‡§∂‡§æ (Diagram)</span>
            <div id="diagram"></div>
        </div>
        <button class="pdf-btn" id="pdfBtn" onclick="window.print()">üìÑ PDF ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <section class="about-section">
        <h2>‚ÑπÔ∏è ‡§á‡§∏ ‡§ü‡•Ç‡§≤ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç</h2>
        <p>‡§Ø‡§π **Land Area Calculator** ‡§Æ‡§®‡•Ä‡§∑ ‡§ï‡•Å‡§Æ‡§æ‡§∞ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§ ‡§è‡§ï ‡§â‡§®‡•ç‡§®‡§§ ‡§™‡•à‡§Æ‡§æ‡§á‡§∂ ‡§ü‡•Ç‡§≤ ‡§π‡•à‡•§ ‡§á‡§∏‡•á ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§î‡§∞ ‡§Ö‡§Æ‡•Ä‡§® (Surveyors) ‡§ï‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡§§‡•ã‡§Ç ‡§ï‡•ã ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∞‡§ñ‡§ï‡§∞ ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à ‡§§‡§æ‡§ï‡§ø ‡§µ‡•á ‡§ú‡§ü‡§ø‡§≤ ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§µ‡§æ‡§≤‡•á ‡§ñ‡•á‡§§‡•ã‡§Ç ‡§ï‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ ‡§∏‡•á ‡§®‡§ø‡§ï‡§æ‡§≤ ‡§∏‡§ï‡•á‡§Ç‡•§</p>
        
        <div class="about-grid">
            <div class="about-item"><b>‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•Ä‡§Ø ‡§™‡•à‡§Æ‡§æ‡§á‡§∂:</b> ‡§¨‡§ø‡§π‡§æ‡§∞ ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§∞‡§æ‡§ú‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§™‡§æ‡§∞‡§Ç‡§™‡§∞‡§ø‡§ï ‡§á‡§ï‡§æ‡§á‡§Ø‡•ã‡§Ç (‡§¨‡•Ä‡§ò‡§æ-‡§ï‡§ü‡•ç‡§†‡§æ) ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§®‡•§</div>
            <div class="about-item"><b>‡§∏‡§ü‡•Ä‡§ï ‡§ó‡§£‡§®‡§æ:</b> ‡§π‡•á‡§∞‡•ã‡§® ‡§´‡•â‡§∞‡•ç‡§Æ‡•Ç‡§≤‡§æ (Heron's Formula) ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§ü‡•á‡§¢‡§º‡•á-‡§Æ‡•á‡§¢‡§º‡•á ‡§ñ‡•á‡§§‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§Æ‡§æ‡§™‡•§</div>
            <div class="about-item"><b>‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§°‡§æ‡§Ø‡§ó‡•ç‡§∞‡§æ‡§Æ:</b> ‡§Æ‡§æ‡§™ ‡§ï‡•á ‡§∏‡§æ‡§•-‡§∏‡§æ‡§• ‡§ñ‡•á‡§§ ‡§ï‡§æ ‡§è‡§ï ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§®‡§ï‡•ç‡§∂‡§æ ‡§≠‡•Ä ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§</div>
            <div class="about-item"><b>‡§Æ‡§≤‡•ç‡§ü‡•Ä-‡§Ø‡•Ç‡§®‡§ø‡§ü:</b> ‡§´‡•Ä‡§ü, ‡§ï‡§°‡§º‡•Ä, ‡§Æ‡•Ä‡§ü‡§∞ ‡§î‡§∞ ‡§ó‡§ú ‡§Æ‡•á‡§Ç ‡§á‡§®‡§™‡•Å‡§ü ‡§¶‡•á‡§®‡•á ‡§ï‡•Ä ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ‡•§</div>
        </div>
        <p style="font-size: 12px; margin-top: 15px; border-top: 1px solid #eee; pt: 10px;">‡§Ø‡§π ‡§ü‡•Ç‡§≤ `localStorage` ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§ú‡§ø‡§∏‡§∏‡•á ‡§Ü‡§™‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§π‡§§‡•Ä ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§á‡§∏‡•á ‡§¨‡§ø‡§®‡§æ ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§ï‡•á ‡§≠‡•Ä ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§</p>
    </section>

    <section class="history-box" style="margin-top: 20px; border-top: 1px solid #f1f5f9; padding-top: 10px;">
        <button onclick="toggleHistory()" style="width: 100%; background: #f1f5f9; padding: 12px; border-radius: 10px; font-size: 14px; border: 1px solid #e2e8f0; display: flex; justify-content: space-between; cursor: pointer;">
            <span>üïí ‡§™‡•Å‡§∞‡§æ‡§®‡•Ä ‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä ‡§¶‡•á‡§ñ‡•á‡§Ç</span><span id="tIcon">‚ñº</span>
        </button>
        <div id="hContent" style="display: none; padding-top: 10px;">
            <button onclick="clearHistory()" style="width: 100%; background: #fee2e2; color: #b91c1c; border: none; padding: 8px; border-radius: 8px; font-size: 12px; cursor: pointer; margin-bottom: 10px; font-weight: bold;">üóëÔ∏è ‡§ï‡•ç‡§≤‡§ø‡§Ø‡§∞ ‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä</button>
            <div id="hList"></div>
        </div>
    </section>
</main>

<footer>Developed with <span style="color:red">‚ù§</span> by <span class="dev-name">Manish Kumar</span></footer>

<script>
/* JavaScript functions same as provided original code to ensure zero functionality loss */
function populateLaggi() {
    const s = document.getElementById('laggi');
    for(let i=4; i<=13; i+=0.25) {
        let o = document.createElement('option'); o.value=i; o.innerText=i+" ‡§π‡§æ‡§•"+(i===6.5?" (‡§Æ‡§æ‡§®‡§ï)":"");
        if(i===6.5) o.selected=true; s.appendChild(o);
    }
}
window.onload = () => { populateLaggi(); drawInputs(); renderHistory(); };

function toggleHistory() {
    const c = document.getElementById('hContent'); const i = document.getElementById('tIcon');
    c.style.display = c.style.display === "block" ? "none" : "block";
    i.innerText = c.style.display === "block" ? "‚ñ≤" : "‚ñº";
}

function clearHistory() { if(confirm("‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä ‡§Æ‡§ø‡§ü‡§æ‡§è‡§Ç?")) { localStorage.removeItem('landCalcHist'); renderHistory(); } }

function drawInputs() {
    const c = document.getElementById('inputs'); const s = document.getElementById('shape').value;
    const u = document.getElementById('inputUnit').value; 
    const uT = `(${u==='feet'?'‡§´‡•Ä‡§ü':u==='kadi'?'‡§ï‡§°‡§º‡•Ä':u==='meter'?'‡§Æ‡•Ä‡§ü‡§∞':'‡§ó‡§ú‡§º'})`;
    c.innerHTML = ""; document.getElementById('resultCard').style.display = "none";
    const f = {
        rectangle: [{l:'‡§≤‡§Ç‡§¨‡§æ‡§à (N/S) '+uT, id:'L'}, {l:'‡§ö‡•å‡§°‡§º‡§æ‡§à (E/W) '+uT, id:'W'}],
        square: [{l:'‡§≠‡•Å‡§ú‡§æ '+uT, id:'S'}],
        triangle: [{l:'‡§≠‡•Å‡§ú‡§æ A '+uT, id:'A'}, {l:'‡§≠‡•Å‡§ú‡§æ B '+uT, id:'B'}, {l:'‡§≠‡•Å‡§ú‡§æ C '+uT, id:'C'}],
        right_triangle: [{l:'‡§Ü‡§ß‡§æ‡§∞ '+uT, id:'B_base'}, {l:'‡§≤‡§Æ‡•ç‡§¨ '+uT, id:'H_height'}],
        parallelogram: [{l:'‡§â‡§§‡•ç‡§§‡§∞ (N) '+uT, id:'m1'}, {l:'‡§™‡•Ç‡§∞‡•ç‡§µ (E) '+uT, id:'m2'}, {l:'‡§¶‡§ï‡•ç‡§∑‡§ø‡§£ (S) '+uT, id:'m3'}, {l:'‡§™‡§∂‡•ç‡§ö‡§ø‡§Æ (W) '+uT, id:'m4'}, {l:'‡§µ‡§ø‡§ï‡§∞‡•ç‡§£ (Optional) '+uT, id:'diag'}],
        oval: [{l:'‡§≤‡§Ç‡§¨‡§æ‡§à '+uT, id:'ld'}, {l:'‡§ö‡•å‡§°‡§º‡§æ‡§à '+uT, id:'sd'}],
        circle: [{l:'‡§µ‡•ç‡§Ø‡§æ‡§∏ '+uT, id:'d'}]
    };
    if(f[s]) f[s].forEach(x => {
        let d = document.createElement('div'); if(s==='square'||s==='circle'||x.id==='diag') d.className='full-width';
        d.innerHTML = `<label>${x.l}</label><input type="number" id="${x.id}" step="any" min="0" placeholder="0.00">`; c.appendChild(d);
    });
}

function heron(a,b,c) {
    if(!a || !b || !c || a+b<=c || a+c<=b || b+c<=a) return 0;
    let s = (a+b+c)/2;
    return Math.sqrt(s*(s-a)*(s-b)*(s-c));
}

function calculate() {
    let areaKadi = 0, svg = "", s = document.getElementById('shape').value;
    const laggi = parseFloat(document.getElementById('laggi').value);
    const unit = document.getElementById('inputUnit').value;
    const oneDhur = Math.pow((laggi * 18) / 7.92, 2);
    const clr = "#4f46e5"; const fill = "rgba(79, 70, 229, 0.1)";

    const getRaw = (id) => parseFloat(document.getElementById(id)?.value) || 0;
    const getVal = (v) => {
        if(unit === 'feet') return v / 0.66;
        if(unit === 'meter') return (v * 3.28084) / 0.66;
        if(unit === 'guz') return (v * 3) / 0.66;
        return v;
    };

    try {
        if(!s) throw "NoShape"; 
        document.getElementById('warningArea').innerHTML = "";

        if(s === "rectangle") {
            let L = getRaw('L'), W = getRaw('W'); if(!L || !W) throw "Err";
            areaKadi = getVal(L) * getVal(W);
            svg = `<svg width="200" height="140"><rect x="30" y="30" width="140" height="80" fill="${fill}" stroke="${clr}" stroke-width="3"/>
            <text x="100" y="25" text-anchor="middle" font-size="12" font-weight="bold">N: ${L}</text>
            <text x="100" y="125" text-anchor="middle" font-size="12" font-weight="bold">S: ${L}</text>
            <text x="15" y="75" font-size="12" font-weight="bold" transform="rotate(-90,15,75)">W: ${W}</text>
            <text x="185" y="75" font-size="12" font-weight="bold" transform="rotate(90,185,75)">E: ${W}</text></svg>`;
        } else if(s === "parallelogram") {
            let n=getRaw('m1'), e=getRaw('m2'), s_side=getRaw('m3'), w=getRaw('m4'), d=getRaw('diag');
            if(!n || !e || !s_side || !w) throw "Err";
            if(d > 0) {
                let t1 = heron(getVal(n), getVal(e), getVal(d));
                let t2 = heron(getVal(s_side), getVal(w), getVal(d));
                if(t1 === 0 || t2 === 0) throw "InvalidTri";
                areaKadi = t1 + t2;
            } else {
                areaKadi = ((getVal(n)+getVal(s_side))/2) * ((getVal(e)+getVal(w))/2);
                document.getElementById('warningArea').innerHTML = `<div class="warning-box">‚ö†Ô∏è ‡§î‡§∏‡§§ ‡§µ‡§ø‡§ß‡§ø ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§π‡•Å‡§Ü ‡§π‡•à‡•§ ‡§∏‡§ü‡•Ä‡§ï ‡§Æ‡§æ‡§™ ‡§π‡•á‡§§‡•Å ‡§µ‡§ø‡§ï‡§∞‡•ç‡§£ ‡§≠‡§∞‡•á‡§Ç‡•§</div>`;
            }
            svg = `<svg width="200" height="140"><path d="M 50 30 L 170 35 L 150 115 L 30 105 Z" fill="${fill}" stroke="${clr}" stroke-width="3"/>
            <text x="110" y="25" text-anchor="middle" font-size="11" font-weight="bold">N: ${n}</text><text x="175" y="80" font-size="11" font-weight="bold">E: ${e}</text>
            <text x="90" y="130" text-anchor="middle" font-size="11" font-weight="bold">S: ${s_side}</text><text x="20" y="70" font-size="11" font-weight="bold">W: ${w}</text>
            ${d > 0 ? `<line x1="50" y1="30" x2="150" y2="115" stroke="red" stroke-dasharray="4"/><text x="100" y="80" fill="red" font-size="10">V: ${d}</text>` : ''}</svg>`;
        } else if(s === "square") {
            let S = getRaw('S'); if(!S) throw "Err";
            areaKadi = Math.pow(getVal(S), 2);
            svg = `<svg width="140" height="140"><rect x="20" y="25" width="100" height="100" fill="${fill}" stroke="${clr}" stroke-width="3"/><text x="70" y="18" text-anchor="middle" font-size="12" font-weight="bold">${S}</text><text x="70" y="138" text-anchor="middle" font-size="12" font-weight="bold">${S}</text></svg>`;
        } else if(s === "triangle") {
            let a=getRaw('A'), b=getRaw('B'), c=getRaw('C');
            areaKadi = heron(getVal(a), getVal(b), getVal(c)); if(areaKadi === 0) throw "InvalidTri";
            svg = `<svg width="160" height="130"><path d="M 80 20 L 145 110 L 15 110 Z" fill="${fill}" stroke="${clr}" stroke-width="3"/><text x="45" y="65" font-weight="bold">${a}</text><text x="115" y="65" font-weight="bold">${b}</text><text x="80" y="125" text-anchor="middle" font-weight="bold">${c}</text></svg>`;
        } else if(s === "right_triangle") {
            let b=getRaw('B_base'), h=getRaw('H_height'); if(!b || !h) throw "Err";
            areaKadi = 0.5 * getVal(b) * getVal(h);
            svg = `<svg width="160" height="130"><path d="M 30 20 L 30 110 L 135 110 Z" fill="${fill}" stroke="${clr}" stroke-width="3"/><text x="15" y="70" font-weight="bold" transform="rotate(-90,15,70)">H: ${h}</text><text x="80" y="125" text-anchor="middle" font-weight="bold">B: ${b}</text></svg>`;
        } else if(s === "oval") {
            let l=getRaw('ld'), w=getRaw('sd'); if(!l || !w) throw "Err";
            areaKadi = (getVal(l) * getVal(w) * Math.PI) / 4;
            svg = `<svg width="180" height="110"><ellipse cx="90" cy="55" rx="75" ry="40" fill="${fill}" stroke="${clr}" stroke-width="3"/><text x="90" y="55" text-anchor="middle" font-weight="bold">L:${l} W:${w}</text></svg>`;
        } else if(s === "circle") {
            let d=getRaw('d'); if(!d) throw "Err";
            areaKadi = Math.PI * Math.pow(getVal(d)/2, 2);
            svg = `<svg width="130" height="130"><circle cx="65" cy="65" r="50" fill="${fill}" stroke="${clr}" stroke-width="3"/><text x="65" y="68" text-anchor="middle" font-weight="bold">D:${d}</text></svg>`;
        }

        if(!areaKadi || areaKadi <= 0) throw "Err";
        let dhur = areaKadi / oneDhur, ft = areaKadi * 0.4356, dec = areaKadi / 1000, guz = ft/9, mtr = ft/10.7639, resKDH = breakdown(dhur);
        document.getElementById('resultCard').style.display = "block";
        document.getElementById('pdfBtn').style.display = "block";
        document.getElementById('resultContent').innerHTML = `
            <div class="res-item" style="background:#fff; border:1px solid #dce4ff; padding:8px; border-radius:8px; margin-bottom:10px;"><span style="font-size:13px; color:#64748b;">‡§≤‡§ó‡•ç‡§ó‡•Ä: ${laggi} ‡§π‡§æ‡§• | 1 ‡§ß‡•Å‡§∞:</span> <b style="color:var(--primary)">${oneDhur.toFixed(3)} ‡§µ‡§∞‡•ç‡§ó ‡§ï‡§°‡§º‡•Ä</b></div>
            <div class="res-item"><span>‡§ï‡•Å‡§≤ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤</span> <b>${areaKadi.toFixed(2)} ‡§µ‡§∞‡•ç‡§ó ‡§ï‡§°‡§º‡•Ä</b></div>
            <div class="res-item"><span>‡§µ‡§∞‡•ç‡§ó ‡§´‡•Ä‡§ü</span> <b>${ft.toFixed(2)} ft¬≤</b></div>
            <div class="res-item"><span>‡§µ‡§∞‡•ç‡§ó ‡§ó‡§ú</span> <b>${guz.toFixed(2)} Guz¬≤</b></div>
            <div class="res-item"><span>‡§µ‡§∞‡•ç‡§ó ‡§Æ‡•Ä‡§ü‡§∞</span> <b>${mtr.toFixed(2)} m¬≤</b></div>
            <div class="res-item"><span>‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤</span> <b>${dec.toFixed(3)} Dec</b></div>
            <div class="res-item highlight" style="background:#e0e7ff; padding:10px; border-radius:8px;"><span>‡§ï‡•Å‡§≤ ‡§ß‡•Å‡§∞</span> <b>${dhur.toFixed(3)} ‡§ß‡•Å‡§∞</b></div>
            <div class="res-item" style="font-size:18px;"><span>‡§™‡•à‡§Æ‡§æ‡§á‡§∂:</span> <span class="highlight">${resKDH}</span></div>`;
        document.getElementById('diagram').innerHTML = svg;
        saveH(s, areaKadi, ft, dec, resKDH, laggi);
    } catch(e) { 
        if(e === "InvalidTri") alert("‡§ó‡§≤‡§§ ‡§Æ‡§æ‡§™! ‡§á‡§® ‡§≠‡•Å‡§ú‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§Ü‡§ï‡§æ‡§∞ ‡§∏‡§Ç‡§≠‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§");
        else if(e === "NoShape") alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§Ü‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç!");
        else alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§∏‡§π‡•Ä ‡§Æ‡§æ‡§™ ‡§≠‡§∞‡•á‡§Ç!"); 
    }
}

function breakdown(d) { 
    let b=Math.floor(d/400), rB=d%400, k=Math.floor(rB/20), r=rB%20, dh=Math.floor(r), dk=Math.round((r-dh)*20); 
    if(dk>=20){dh++;dk=0} if(dh>=20){k++;dh=0} if(k>=20){b++;k=0} 
    return (b>0?b+" ‡§¨‡•Ä‡§ò‡§æ - ":"")+k+" ‡§ï‡§ü‡•ç‡§†‡§æ - "+dh+" ‡§ß‡•Å‡§∞ - "+dk+" ‡§ß‡•Å‡§∞‡§ï‡•Ä"; 
}

function saveH(shape, kadi, ft, dec, kdh, laggi) { 
    let h = JSON.parse(localStorage.getItem('landCalcHist')) || []; 
    h.unshift({id:Date.now(), shape, kadi:kadi.toFixed(1), ft:ft.toFixed(2), dec:dec.toFixed(3), kdh, laggi, time:new Date().toLocaleTimeString('hi-IN')}); 
    localStorage.setItem('landCalcHist', JSON.stringify(h.slice(0, 10))); 
    renderHistory(); 
}

function renderHistory() { 
    const l = document.getElementById('hList'); let h = JSON.parse(localStorage.getItem('landCalcHist')) || []; 
    if(!h.length){l.innerHTML="<p style='text-align:center; color:#888;'>‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à</p>"; return;} 
    l.innerHTML = h.map(x => `
        <div class="hist-item">
            <div class="hist-meta">
                <span>üïí ${x.time}</span>
                <span class="hist-tag">‡§≤‡§ó‡•ç‡§ó‡•Ä: ${x.laggi} ‡§π‡§æ‡§•</span>
            </div>
            <div class="hist-main">${x.shape.toUpperCase()}: ${x.kdh}</div>
            <div class="hist-grid">
                <span>üìê ${x.kadi} kadi¬≤</span>
                <span>üìè ${x.ft} ft¬≤</span>
                <span>üå± ${x.dec} Dec</span>
            </div>
        </div>`).join(''); 
}

function resetAll() { 
    document.querySelectorAll('#inputs input').forEach(i => i.value=""); 
    document.getElementById('resultCard').style.display="none"; 
    document.getElementById('warningArea').innerHTML = "";
    document.getElementById('diagram').innerHTML = "";
}
</script>
</body>
</html>
