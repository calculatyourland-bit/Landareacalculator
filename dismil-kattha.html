<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>‡§¨‡§ø‡§π‡§æ‡§∞ ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞ ¬∑ ‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤ ‡§∏‡•á ‡§ï‡§ü‡•ç‡§†‡§æ-‡§ß‡•Å‡§∞ ¬∑ ‡§Æ‡§®‡•Ä‡§∑ ‡§ï‡•Å‡§Æ‡§æ‡§∞</title>
    <meta name="description" content="‡§¨‡§ø‡§π‡§æ‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§ü‡•Ä‡§ï ‡§≠‡•Ç‡§Æ‡§ø ‡§Æ‡§æ‡§™ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞ - ‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤ ‡§ï‡•ã ‡§¨‡•Ä‡§ò‡§æ, ‡§ï‡§ü‡•ç‡§†‡§æ, ‡§ß‡•Å‡§∞ ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç">
    <meta name="keywords" content="‡§¨‡§ø‡§π‡§æ‡§∞ ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞, ‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤ ‡§∏‡•á ‡§ï‡§ü‡•ç‡§†‡§æ, ‡§≠‡•Ç‡§Æ‡§ø ‡§Æ‡§æ‡§™, ‡§¨‡•Ä‡§ò‡§æ ‡§ï‡§ü‡•ç‡§†‡§æ ‡§ß‡•Å‡§∞, Manish Kumar">
    <meta name="author" content="Manish Kumar">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* ---------- MODERN MATERIAL 3 + GLASSMORPHISM (6.html jaisa) ---------- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        :root {
            --primary: #4f46e5;
            --primary-soft: #6366f1;
            --primary-dark: #4338ca;
            --primary-gradient: linear-gradient(145deg, #4f46e5, #7c3aed);
            --bg-light: #f9fafb;
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.5);
            --card-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(255,255,255,0.6);
            --text-dark: #0f172a;
            --text-soft: #334155;
            --text-muted: #64748b;
            --accent-glow: 0 0 0 3px rgba(79, 70, 229, 0.2);
            --card-bg-1: rgba(255, 247, 237, 0.8);
            --card-bg-2: rgba(237, 233, 254, 0.8);
            --card-bg-3: rgba(220, 252, 231, 0.8);
            --success-bg: #e8f5e9;
            --info-bg: #e3f2fd;
            --warning-bg: #fff3e0;
            --wa-green: #25D366;
            --whatsapp-dark: #128C7E;
            --tech-bg: linear-gradient(145deg, #1e293b, #0f172a);
        }

        body {
            background: linear-gradient(145deg, #e9eef3 0%, #dbe1e8 100%);
            color: var(--text-dark);
            padding: 16px 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .glass-box {
            width: 100%;
            max-width: 1100px;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            padding: 28px 26px;
            border-radius: 40px;
            box-shadow: 0 20px 50px -12px rgba(0,0,0,0.15);
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
        }

        .top {
            text-align: center;
            margin-bottom: 28px;
        }

        h1 {
            margin: 0;
            font-size: 34px;
            font-weight: 800;
            background: linear-gradient(145deg, #4f46e5, #9333ea);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-transform: uppercase;
            letter-spacing: -1px;
            line-height: 1.2;
            text-shadow: 0 2px 15px rgba(79,70,229,0.25);
        }

        .hero-name {
            display: inline-block;
            font-size: 15px;
            font-weight: 700;
            margin-top: 6px;
            background: rgba(255,255,255,0.5);
            backdrop-filter: blur(8px);
            padding: 6px 20px;
            border-radius: 60px;
            color: #1e293b;
            border: 1px solid rgba(255,255,255,0.8);
            box-shadow: 0 4px 10px rgba(0,0,0,0.02);
            transition: all 0.3s ease;
        }
        .hero-name:hover {
            background: rgba(255,255,255,0.8);
            transform: translateY(-2px);
        }

        .ad-slot {
            background: rgba(226, 232, 240, 0.8);
            backdrop-filter: blur(4px);
            margin: 18px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 92px;
            border-radius: 24px;
            font-size: 12px;
            color: #334155;
            border: 1px solid rgba(203, 213, 225, 0.8);
            transition: all 0.3s ease;
        }

        .card {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,0.7);
            border-radius: 28px;
            padding: 24px 22px;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px -8px rgba(0,0,0,0.08);
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
        }
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 30px -10px rgba(79,70,229,0.2);
            border-color: rgba(255,255,255,0.9);
        }

        .district-card {
            background: var(--card-bg-1);
            border-color: #fed7aa;
        }

        .measure-card {
            background: var(--card-bg-2);
            border-color: #c7d2fe;
        }

        .result-card {
            background: white;
            border-radius: 32px;
            margin-top: 30px;
            animation: slideInUp 0.5s cubic-bezier(0.15,0.85,0.35,1);
            box-shadow: 0 25px 40px -15px rgba(79,70,229,0.25);
            border: 1px solid rgba(255,255,255,0.9);
            overflow: hidden;
            display: none;
            transition: all 0.3s ease;
        }

        .result-header {
            background: linear-gradient(145deg, #4f46e5, #7c3aed);
            color: white;
            padding: 18px 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .result-header h3 {
            font-size: 22px;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .result-body {
            padding: 24px;
            background: #ffffff;
        }

        label {
            font-size: 13px;
            font-weight: 700;
            color: var(--text-soft);
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            letter-spacing: 0.4px;
            text-transform: uppercase;
        }

        .required::after {
            content: " *";
            color: #ef4444;
        }

        select, input {
            width: 100%;
            padding: 15px 16px;
            border: 1.8px solid rgba(203, 213, 225, 0.9);
            border-radius: 20px;
            font-size: 15px;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(4px);
            transition: all 0.3s cubic-bezier(0.2,0,0,1);
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            font-weight: 500;
            color: #0f172a;
        }

        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='%234f46e5'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 20px;
            padding-right: 48px;
        }

        input[type="number"] {
            -moz-appearance: textfield;
            appearance: textfield;
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        select:focus, input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.15), inset 0 2px 4px rgba(0,0,0,0.02);
            outline: none;
            background: white;
            transform: scale(1.01);
        }

        select:disabled, input:disabled {
            background: #f1f5f9;
            color: #64748b;
            border-color: #e2e8f0;
            opacity: 0.7;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 8px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 16px;
            margin-top: 8px;
        }

        @media (max-width: 768px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
        }

        .btn-group {
            display: flex;
            gap: 14px;
            margin-top: 28px;
        }

        .calc-btn {
            flex: 1;
            padding: 16px 20px;
            border-radius: 36px;
            border: none;
            background: linear-gradient(145deg, #4f46e5, #6d28d9);
            color: white;
            font-weight: 700;
            font-size: 17px;
            letter-spacing: 0.5px;
            box-shadow: 0 10px 25px -8px #4f46e5b0;
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .calc-btn:hover:not(:disabled) {
            transform: scale(0.96);
            box-shadow: 0 15px 30px -5px #4f46e5;
            background: linear-gradient(145deg, #4338ca, #5b21b6);
        }
        .calc-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background: linear-gradient(145deg, #94a3b8, #64748b);
        }

        .reset-btn {
            background: rgba(241, 245, 249, 0.9);
            backdrop-filter: blur(4px);
            color: #1e293b;
            border: 1px solid rgba(255,255,255,0.9);
            padding: 16px 20px;
            border-radius: 36px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .reset-btn:hover {
            background: #e2e8f0;
            transform: scale(0.96);
            border-color: rgba(255,255,255,1);
        }

        .btn-wa, .btn-img {
            background: linear-gradient(145deg, #25D366, #128C7E);
            color: white;
            padding: 14px 20px;
            border-radius: 36px;
            font-weight: 700;
            font-size: 15px;
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            margin-top: 10px;
        }
        .btn-img {
            background: linear-gradient(145deg, #3b82f6, #2563eb);
        }
        .btn-wa:hover, .btn-img:hover {
            transform: scale(0.96);
            opacity: 0.95;
            box-shadow: 0 10px 20px -8px currentColor;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: #f8fafc;
            padding: 16px;
            border-radius: 20px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
        }
        .stat-item:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
            transform: translateY(-2px);
            box-shadow: 0 8px 15px -6px rgba(79,70,229,0.15);
        }
        .stat-label {
            font-size: 12px;
            color: #64748b;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .stat-value {
            font-size: 20px;
            font-weight: 800;
            color: #0f172a;
        }
        .stat-unit {
            font-size: 13px;
            color: #475569;
            font-weight: 500;
            margin-left: 4px;
        }

        .laggi-info {
            background: #e0e7ff;
            border-radius: 16px;
            padding: 14px 18px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #c7d2fe;
            transition: all 0.3s ease;
        }
        .laggi-info:hover {
            background: #c7d2fe;
            transform: translateY(-2px);
        }

        .paimais-hindi {
            background: #fef3c7;
            border-radius: 40px;
            padding: 14px 20px;
            font-size: 20px;
            font-weight: 800;
            color: #92400e;
            text-align: center;
            border: 1px solid #fde68a;
            margin-top: 12px;
            transition: all 0.3s ease;
        }
        .paimais-hindi:hover {
            background: #fde68a;
            transform: scale(1.01);
            box-shadow: 0 8px 15px -6px #f59e0b;
        }

        .quick-conversions {
            background: rgba(255,255,255,0.5);
            backdrop-filter: blur(8px);
            border-radius: 24px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255,255,255,0.8);
            transition: all 0.3s ease;
        }
        .quick-conversions:hover {
            background: rgba(255,255,255,0.7);
            box-shadow: 0 10px 25px -10px rgba(79,70,229,0.15);
        }
        .conversion-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }
        .conv-btn {
            background: white;
            border: 1px solid #e2e8f0;
            padding: 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
            text-align: center;
            font-size: 13px;
            font-weight: 600;
            color: #4f46e5;
        }
        .conv-btn:hover {
            background: #4f46e5;
            color: white;
            border-color: #4f46e5;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px -8px #4f46e5;
        }

        /* ----- TECHNICAL SPECS CARD - EXACTLY LIKE 6.html ----- */
        .tech-specs {
            background: var(--tech-bg);
            color: white;
            padding: 28px;
            border-radius: 28px;
            margin-top: 30px;
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .tech-specs:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 35px -10px rgba(0,0,0,0.4);
            border-color: rgba(255,255,255,0.2);
        }
        .tech-specs h3 {
            color: #fbbf24;
            font-size: 22px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .specs-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            color: #e2e8f0;
        }
        .spec-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
            transition: all 0.2s ease;
            padding: 6px 10px;
            border-radius: 12px;
        }
        .spec-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
            color: white;
        }
        .spec-item:before {
            content: "‚ñπ";
            color: #fbbf24;
            font-size: 18px;
        }

        .history-section {
            margin-top: 40px;
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(16px);
            border-radius: 36px;
            padding: 26px;
            border: 1px solid rgba(255,255,255,0.8);
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
        }
        .history-section:hover {
            background: rgba(255,255,255,0.8);
            box-shadow: 0 20px 35px -12px rgba(79,70,229,0.2);
        }
        .history-section h2 {
            color: #4f46e5;
            font-size: 26px;
            margin-top: 0;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .history-toggle-btn {
            background: rgba(241,245,249,0.9);
            backdrop-filter: blur(8px);
            padding: 18px 22px;
            border-radius: 28px;
            border: 1px solid white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            cursor: pointer;
            font-weight: 700;
            font-size: 16px;
            color: #0f172a;
            transition: all 0.3s ease;
        }
        .history-toggle-btn:hover {
            background: rgba(226,232,240,0.95);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px -8px rgba(79,70,229,0.2);
        }
        .history-content {
            display: none;
            padding-top: 20px;
            animation: slideInUp 0.4s ease;
        }
        .clear-history-btn {
            width: 100%;
            background: #fee2e2;
            color: #b91c1c;
            border: none;
            padding: 14px;
            border-radius: 24px;
            font-size: 15px;
            cursor: pointer;
            margin-bottom: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        .clear-history-btn:hover {
            background: #fecaca;
            transform: scale(0.98);
            box-shadow: 0 8px 15px -6px #ef4444;
        }
        .history-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 6px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .history-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 24px;
            padding: 18px;
            margin-bottom: 0;
            transition: all 0.3s cubic-bezier(0.2,0,0,1);
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }
        .history-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 30px -12px rgba(79,70,229,0.2);
            border-color: #4f46e5;
        }
        .history-count {
            background: #4f46e5;
            color: white;
            padding: 4px 16px;
            border-radius: 40px;
            font-size: 16px;
        }

        .info-card {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(16px);
            border-radius: 36px;
            padding: 28px;
            border: 1px solid rgba(255,255,255,0.8);
            height: fit-content;
            margin-top: 30px;
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
        }
        .info-card:hover {
            background: rgba(255,255,255,0.8);
            transform: translateY(-3px);
            box-shadow: 0 20px 35px -12px rgba(79,70,229,0.15);
        }
        .info-card h2 {
            color: #4f46e5;
            font-size: 28px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 800;
        }
        .highlight-box, .instruction-box {
            background: rgba(255,255,255,0.5);
            border-radius: 24px;
            padding: 20px;
            margin: 20px 0;
            border-left: 6px solid #4f46e5;
            transition: all 0.3s ease;
        }
        .highlight-box:hover, .instruction-box:hover {
            background: rgba(255,255,255,0.7);
            transform: translateX(5px);
        }

        .error-message, .success-message {
            padding: 14px 18px;
            border-radius: 24px;
            margin: 10px 0;
            display: none;
            align-items: center;
            gap: 12px;
            font-weight: 500;
            animation: slideInUp 0.3s ease;
        }
        .error-message {
            background: #fee2e2;
            color: #b91c1c;
            border: 1px solid #fecaca;
        }
        .success-message {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }

        .loading-spinner {
            display: none;
            text-align: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        .loading-spinner i {
            font-size: 24px;
            color: #4f46e5;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .breathing-heart {
            animation: breathe 2.2s ease-in-out infinite;
            display: inline-block;
            color: #ef4444;
        }
        @keyframes breathe {
            0% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.24); opacity: 1; text-shadow: 0 0 8px rgba(239,68,68,0.6); }
            100% { transform: scale(1); opacity: 0.9; }
        }

        footer {
            margin-top: 40px;
            font-size: 15px;
            color: #475569;
            text-align: center;
            padding: 20px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        footer:hover {
            color: #1e293b;
            transform: scale(1.02);
        }

        @keyframes slideInUp {
            0% { opacity: 0; transform: translateY(30px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        @media (max-width: 600px) {
            .result-stats { grid-template-columns: 1fr; }
            .specs-list { grid-template-columns: 1fr; }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(226, 232, 240, 0.5);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #4f46e5;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #4338ca;
        }
    </style>
</head>
<body>
<main class="glass-box">
    <header class="top">
        <h1>üåæ ‡§¨‡§ø‡§π‡§æ‡§∞ ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞</h1>
        <div class="hero-name">üìê ‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤ ‡§∏‡•á ‡§ï‡§ü‡•ç‡§†‡§æ-‡§ß‡•Å‡§∞ ¬∑ ‡§Æ‡§®‡•Ä‡§∑ ‡§ï‡•Å‡§Æ‡§æ‡§∞</div>
    </header>

    <div class="ad-slot">
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-XXXXXXXXXXXXXXXX" data-ad-slot="XXXXXXXXXX" data-ad-format="horizontal"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <!-- District Card -->
    <section class="card district-card">
        <label>üìç ‡§™‡•ç‡§∞‡§Æ‡§Ç‡§°‡§≤ ‡§è‡§µ‡§Ç ‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç <span style="color: #ef4444;">*</span></label>
        <div class="grid-2">
            <div>
                <select id="division" onchange="updateDistricts()">
                    <option value="">‡§™‡•ç‡§∞‡§Æ‡§Ç‡§°‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
                </select>
            </div>
            <div>
                <select id="district" onchange="autoSetLaggi()" disabled>
                    <option value="">‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
                </select>
            </div>
        </div>
    </section>

    <!-- Laggi Card -->
    <section class="card measure-card">
        <label>ü™µ ‡§π‡§æ‡§• ‡§ï‡•Ä ‡§≤‡§ó‡•ç‡§ó‡•Ä (Laggi)</label>
        <select id="laggi" disabled></select>
        <small style="display: block; margin-top: 12px; color: #4f46e5; font-weight: 500;">‚úì ‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡§®‡•á ‡§™‡§∞ ‡§≤‡§ó‡•ç‡§ó‡•Ä ‡§∏‡•ç‡§µ‡§§‡§É ‡§∏‡•á‡§ü ‡§π‡•ã‡§ó‡•Ä</small>
    </section>

    <!-- Input Card -->
    <section class="card" style="background: var(--card-bg-3);">
        <label>üìè ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡§æ ‡§Æ‡§æ‡§™ ‡§°‡§æ‡§≤‡•á‡§Ç</label>
        <div class="grid-3">
            <div>
                <label style="font-size: 12px;">‡§è‡§ï‡§°‡§º (Acre)</label>
                <input type="number" id="acre" placeholder="0.00" min="0" step="0.01" disabled oninput="convertFromAcre()">
            </div>
            <div>
                <label style="font-size: 12px;">‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤ (Dismil)</label>
                <input type="number" id="dismil" placeholder="0.00" min="0" step="0.01" disabled oninput="convertFromDismil()">
            </div>
            <div>
                <label style="font-size: 12px;">‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ (Hectare)</label>
                <input type="number" id="hectare" placeholder="0.00" min="0" step="0.01" disabled oninput="convertFromHectare()">
            </div>
        </div>

        <!-- Quick Conversions -->
        <div class="quick-conversions">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                <span style="background: #4f46e5; color: white; padding: 4px 12px; border-radius: 40px; font-size: 12px;">‚ö° ‡§§‡•ç‡§µ‡§∞‡§ø‡§§</span>
                <span style="font-weight: 600;">‡§è‡§ï ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§Æ‡•á‡§Ç ‡§Æ‡§æ‡§™</span>
            </div>
            <div class="conversion-buttons">
                <div class="conv-btn" onclick="quickConvert(1, 'acre')">1 ‡§è‡§ï‡§°‡§º</div>
                <div class="conv-btn" onclick="quickConvert(1, 'bigha_up')">1 ‡§¨‡•Ä‡§ò‡§æ (UP)</div>
                <div class="conv-btn" onclick="quickConvert(1, 'bigha_raj')">1 ‡§¨‡•Ä‡§ò‡§æ (‡§∞‡§æ‡§ú.)</div>
                <div class="conv-btn" onclick="quickConvert(1, 'hectare')">1 ‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞</div>
            </div>
        </div>

        <div class="btn-group">
            <button class="calc-btn" id="calcBtn" onclick="calculateWithLoader()" disabled>
                <span>‚ú®</span> ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
            </button>
            <button class="reset-btn" onclick="resetAll()">
                <span>‚Ü∫</span> ‡§∞‡•Ä‡§∏‡•á‡§ü
            </button>
        </div>

        <div class="loading-spinner" id="loadingSpinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p style="margin-top: 10px;">‡§ó‡§£‡§®‡§æ ‡§ú‡§æ‡§∞‡•Ä ‡§π‡•à...</p>
        </div>
    </section>

    <!-- Result Card - 6.html style with proper breakdown -->
    <div class="result-card" id="output">
        <div class="result-header">
            <span style="font-size: 28px;">üìê</span>
            <h3>‡§™‡•à‡§Æ‡§æ‡§á‡§∂ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ</h3>
        </div>
        <div class="result-body">
            <div id="errorMsg" class="error-message">
                <i class="fas fa-exclamation-circle"></i>
                <span id="errorText"></span>
            </div>
            <div id="successMsg" class="success-message">
                <i class="fas fa-check-circle"></i>
                <span id="successText"></span>
            </div>

            <!-- Laggi Info Card -->
            <div class="laggi-info" id="laggiInfo">
                <span style="font-weight:600; color:#1e293b;"><span style="font-size:18px;">ü™µ</span> ‡§≤‡§ó‡•ç‡§ó‡•Ä: <span id="displayLaggi"></span> ‡§π‡§æ‡§•</span>
                <span style="background:#4f46e5; color:white; padding:6px 16px; border-radius:40px; font-weight:600;" id="oneDhurDisplay"></span>
            </div>

            <!-- Main Result in Bigha-Kattha-Dhur -->
            <div class="stat-item" style="margin-bottom: 20px; background: #e0e7ff;">
                <div class="stat-label">üèÜ ‡§¨‡§ø‡§π‡§æ‡§∞‡•Ä ‡§á‡§ï‡§æ‡§à ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§≤ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤</div>
                <div style="font-size: 24px; font-weight: 800; color: #4f46e5;" id="final-res"></div>
            </div>

            <!-- Area in different units - No Duplication -->
            <div class="result-stats">
                <div class="stat-item">
                    <div class="stat-label">üìè ‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü</div>
                    <div><span class="stat-value" id="res-sqft"></span> <span class="stat-unit">ft¬≤</span></div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">‚è∫Ô∏è ‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤</div>
                    <div><span class="stat-value" id="res-dismil"></span> <span class="stat-unit">‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤</span></div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">üåæ ‡§è‡§ï‡§°‡§º</div>
                    <div><span class="stat-value" id="res-acre"></span> <span class="stat-unit">‡§è‡§ï‡§°‡§º</span></div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">üìê ‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞</div>
                    <div><span class="stat-value" id="res-hectare"></span> <span class="stat-unit">ha</span></div>
                </div>
            </div>

            <!-- Additional Units Grid -->
            <div id="unitResults" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px;"></div>

            <!-- Detailed Breakdown in Hindi -->
            <div class="paimais-hindi" id="detailedBreakdown"></div>

            <!-- Action Buttons -->
            <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-top: 20px;">
                <button class="btn-wa" onclick="shareOnWhatsApp()">
                    <i class="fab fa-whatsapp"></i> WhatsApp ‡§∂‡•á‡§Ø‡§∞
                </button>
                <button class="btn-img" onclick="downloadImage()">
                    <i class="fas fa-image"></i> ‡§á‡§Æ‡•á‡§ú ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
                </button>
            </div>
        </div>
    </div>

    <!-- History Section - Exactly like 6.html -->
    <section class="history-section">
        <h2>üïí ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§∂‡§® ‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä <span id="historyCount" class="history-count">0</span></h2>
        
        <button class="history-toggle-btn" id="historyToggleBtn">
            <span>üìã ‡§™‡§ø‡§õ‡§≤‡•Ä ‡§ó‡§£‡§®‡§æ‡§è‡§Ç ‡§¶‡•á‡§ñ‡•á‡§Ç</span>
            <span id="historyIcon">‚ñº</span>
        </button>
        
        <div class="history-content" id="historyContent">
            <button class="clear-history-btn" id="clearHistoryBtn">
                <span>üóëÔ∏è</span> ‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä ‡§ï‡•ç‡§≤‡§ø‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç
            </button>
            
            <div class="history-list" id="historyList"></div>
        </div>
    </section>

    <!-- Technical Specifications Card - Exactly like 6.html -->
    <div class="tech-specs">
        <h3>
            <span>‚öôÔ∏è</span> ‡§¨‡§ø‡§π‡§æ‡§∞ ‡§≠‡•Ç‡§Æ‡§ø ‡§Æ‡§æ‡§™‡§® - ‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ‡§è‡§Å
        </h3>
        <div class="specs-list">
            <div class="spec-item">1 ‡§è‡§ï‡§°‡§º = 100 ‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤</div>
            <div class="spec-item">1 ‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤ = 435.6 ‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü</div>
            <div class="spec-item">1 ‡§¨‡•Ä‡§ò‡§æ (‡§¨‡§ø‡§π‡§æ‡§∞) = 20 ‡§ï‡§ü‡•ç‡§†‡§æ</div>
            <div class="spec-item">1 ‡§ï‡§ü‡•ç‡§†‡§æ = 20 ‡§ß‡•Å‡§∞</div>
            <div class="spec-item">1 ‡§ß‡•Å‡§∞ = (‡§≤‡§ó‡•ç‡§ó‡•Ä √ó 1.5)¬≤ ‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü</div>
            <div class="spec-item">20 ‡§ß‡•Å‡§∞ = 1 ‡§ï‡§ü‡•ç‡§†‡§æ</div>
            <div class="spec-item">20 ‡§ï‡§ü‡•ç‡§†‡§æ = 1 ‡§¨‡•Ä‡§ò‡§æ</div>
            <div class="spec-item">400 ‡§ß‡•Å‡§∞ = 1 ‡§¨‡•Ä‡§ò‡§æ</div>
            <div class="spec-item">1 ‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ = 2.47105 ‡§è‡§ï‡§°‡§º</div>
            <div class="spec-item">‡§≤‡§ó‡•ç‡§ó‡•Ä: 4 ‡§∏‡•á 12 ‡§π‡§æ‡§•, ‡§∏‡•ç‡§ü‡•á‡§™ 0.25</div>
            <div class="spec-item">38 ‡§ú‡§ø‡§≤‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§ü‡•Ä‡§ï ‡§°‡•á‡§ü‡§æ</div>
            <div class="spec-item">‡§ú‡§ø‡§≤‡•á‡§µ‡§æ‡§∞ ‡§∏‡•ç‡§µ‡§§‡§É ‡§≤‡§ó‡•ç‡§ó‡•Ä ‡§∏‡•á‡§ü</div>
        </div>
    </div>

    <!-- About Section -->
    <section class="info-card">
        <h2><i class="fas fa-book-open"></i> ‡§¨‡§ø‡§π‡§æ‡§∞ ‡§≠‡•Ç‡§Æ‡§ø ‡§Æ‡§æ‡§™‡§® ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä</h2>
        <div class="highlight-box">
            <h4><i class="fas fa-lightbulb"></i> ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à ‡§Ø‡§π ‡§ü‡•Ç‡§≤?</h4>
            <p>‡§¨‡§ø‡§π‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§≠‡•Ç‡§Æ‡§ø ‡§Æ‡§æ‡§™‡§® ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä ‡§Ö‡§®‡•ç‡§Ø ‡§∞‡§æ‡§ú‡•ç‡§Ø‡•ã‡§Ç ‡§∏‡•á ‡§Ö‡§≤‡§ó ‡§π‡•à‡•§ ‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ó‡•ç‡§ó‡•Ä (‡§π‡§æ‡§• ‡§ï‡•Ä ‡§Æ‡§æ‡§™) ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§ú‡§ø‡§≤‡•á ‡§Æ‡•á‡§Ç ‡§≠‡§ø‡§®‡•ç‡§® ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§ ‡§Ø‡§π ‡§ü‡•Ç‡§≤ ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§≤‡§ó‡•ç‡§ó‡•Ä ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§∏‡§ü‡•Ä‡§ï ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§</p>
        </div>
        <div class="instruction-box">
            <h4><i class="fas fa-clipboard-list"></i> ‡§â‡§™‡§Ø‡•ã‡§ó ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂</h4>
            <ol style="margin-left: 20px;">
                <li><strong>‡§™‡•ç‡§∞‡§Æ‡§Ç‡§°‡§≤ ‡§î‡§∞ ‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç:</strong> ‡§Ø‡•á ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§π‡•à‡§Ç‡•§</li>
                <li><strong>‡§≤‡§ó‡•ç‡§ó‡•Ä ‡§ú‡§æ‡§Å‡§ö‡•á‡§Ç:</strong> ‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡§®‡•á ‡§™‡§∞ ‡§≤‡§ó‡•ç‡§ó‡•Ä ‡§∏‡•ç‡§µ‡§§‡§É ‡§∏‡•á‡§ü ‡§π‡•ã ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§</li>
                <li><strong>‡§≠‡•Ç‡§Æ‡§ø ‡§Æ‡§æ‡§™ ‡§°‡§æ‡§≤‡•á‡§Ç:</strong> ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§è‡§ï ‡§á‡§ï‡§æ‡§à (‡§è‡§ï‡§°‡§º/‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤/‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞) ‡§Æ‡•á‡§Ç ‡§Æ‡§æ‡§® ‡§°‡§æ‡§≤‡•á‡§Ç‡•§</li>
                <li><strong>‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç:</strong> ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü ‡§¨‡§ü‡§® ‡§¶‡§¨‡§æ‡§è‡§Å‡•§</li>
            </ol>
        </div>
    </section>

    <footer>
        Developed with <span class="breathing-heart">‚ù§Ô∏è</span> by <span style="font-weight:900; color:#0f172a;">Manish Kumar</span> ¬∑ ‡§¨‡§ø‡§π‡§æ‡§∞ ‡§≠‡•Ç‡§Æ‡§ø ‡§Æ‡§æ‡§™ ¬∑ ‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ ‡§ï‡•Ä ‡§®‡§à ‡§™‡§∞‡§ø‡§≠‡§æ‡§∑‡§æ
    </footer>
</main>

<script>
    // ---------- BIHAR LAND CALCULATOR LOGIC (ORIGINAL 19.html) ----------
    const biharData = {
        "‡§§‡§ø‡§∞‡§π‡•Å‡§§": { "‡§Æ‡•Å‡§ú‡§´‡•ç‡§´‡§∞‡§™‡•Å‡§∞": 6.5, "‡§µ‡•à‡§∂‡§æ‡§≤‡•Ä": 6.5, "‡§∏‡•Ä‡§§‡§æ‡§Æ‡§¢‡§º‡•Ä": 6.5, "‡§∂‡§ø‡§µ‡§π‡§∞": 6.5, "‡§™‡•Ç‡§∞‡•ç‡§µ‡•Ä ‡§ö‡§Ç‡§™‡§æ‡§∞‡§£": 6.5, "‡§™‡§∂‡•ç‡§ö‡§ø‡§Æ‡•Ä ‡§ö‡§Ç‡§™‡§æ‡§∞‡§£": 6.5 },
        "‡§™‡§ü‡§®‡§æ": { "‡§™‡§ü‡§®‡§æ": 5.5, "‡§®‡§æ‡§≤‡§Ç‡§¶‡§æ": 5.5, "‡§≠‡•ã‡§ú‡§™‡•Å‡§∞": 6, "‡§¨‡§ï‡•ç‡§∏‡§∞": 6, "‡§∞‡•ã‡§π‡§§‡§æ‡§∏": 6, "‡§ï‡•à‡§Æ‡•Ç‡§∞": 6 },
        "‡§¶‡§∞‡§≠‡§Ç‡§ó‡§æ": { "‡§¶‡§∞‡§≠‡§Ç‡§ó‡§æ": 6.5, "‡§Æ‡§ß‡•Å‡§¨‡§®‡•Ä": 6.75, "‡§∏‡§Æ‡§∏‡•ç‡§§‡•Ä‡§™‡•Å‡§∞": 6.5 },
        "‡§™‡•Ç‡§∞‡•ç‡§£‡§ø‡§Ø‡§æ": { "‡§™‡•Ç‡§∞‡•ç‡§£‡§ø‡§Ø‡§æ": 7.5, "‡§ï‡§ü‡§ø‡§π‡§æ‡§∞": 7.5, "‡§Ö‡§∞‡§∞‡§ø‡§Ø‡§æ": 7.5, "‡§ï‡§ø‡§∂‡§®‡§ó‡§Ç‡§ú": 7.5 },
        "‡§Æ‡§ó‡§ß": { "‡§ó‡§Ø‡§æ": 5.5, "‡§ú‡§π‡§æ‡§®‡§æ‡§¨‡§æ‡§¶": 5.5, "‡§Ö‡§∞‡§µ‡§≤": 5.5, "‡§®‡§µ‡§æ‡§¶‡§æ": 5.5, "‡§î‡§∞‡§Ç‡§ó‡§æ‡§¨‡§æ‡§¶": 5.5 },
        "‡§Æ‡•Å‡§Ç‡§ó‡•á‡§∞": { "‡§Æ‡•Å‡§Ç‡§ó‡•á‡§∞": 6, "‡§¨‡•á‡§ó‡•Ç‡§∏‡§∞‡§æ‡§Ø": 6, "‡§ñ‡§ó‡§°‡§º‡§ø‡§Ø‡§æ": 6, "‡§ú‡§Æ‡•Å‡§à": 6, "‡§≤‡§ñ‡•Ä‡§∏‡§∞‡§æ‡§Ø": 6, "‡§∂‡•á‡§ñ‡§™‡•Å‡§∞‡§æ": 6 },
        "‡§∏‡§π‡§∞‡§∏‡§æ": { "‡§∏‡§π‡§∞‡§∏‡§æ": 7, "‡§Æ‡§ß‡•á‡§™‡•Å‡§∞‡§æ": 7, "‡§∏‡•Å‡§™‡•å‡§≤": 7 },
        "‡§≠‡§æ‡§ó‡§≤‡§™‡•Å‡§∞": { "‡§≠‡§æ‡§ó‡§≤‡§™‡•Å‡§∞": 6, "‡§¨‡§æ‡§Ç‡§ï‡§æ": 6 },
        "‡§∏‡§æ‡§∞‡§£": { "‡§∏‡§æ‡§∞‡§£": 6, "‡§∏‡•Ä‡§µ‡§æ‡§®": 6, "‡§ó‡•ã‡§™‡§æ‡§≤‡§ó‡§Ç‡§ú": 6 }
    };

    const unitConversions = {
        hectareToAcre: 2.47105,
        acreToSqft: 43560,
        dismilToSqft: 435.6,
        sqmToSqft: 10.7639
    };

    let historyData = [];
    const MAX_HISTORY = 20;

    // Initialize
    window.onload = function() {
        loadHistory();
        initializeDivisionDropdown();
        setupLaggiList();
        renderHistory();
        updateHistoryCount();
        setupEventListeners();
        
        document.getElementById('historyToggleBtn').addEventListener('click', toggleHistory);
        document.getElementById('clearHistoryBtn').addEventListener('click', clearHistory);
    };

    // Encryption
    function encryptData(data) { return btoa(JSON.stringify(data)); }
    function decryptData(encrypted) { try { return JSON.parse(atob(encrypted)); } catch { return []; } }

    function loadHistory() {
        try {
            const encrypted = localStorage.getItem('land_calc_history_v2');
            if (encrypted) historyData = decryptData(encrypted) || [];
        } catch(e) { historyData = []; }
    }

    function saveHistory() {
        try {
            const encrypted = encryptData(historyData.slice(0, MAX_HISTORY));
            localStorage.setItem('land_calc_history_v2', encrypted);
        } catch(e) {}
    }

    function initializeDivisionDropdown() {
        const divSelect = document.getElementById("division");
        Object.keys(biharData).forEach(div => {
            let opt = document.createElement("option");
            opt.value = div;
            opt.textContent = div;
            divSelect.appendChild(opt);
        });
        disableAllFields();
    }

    function disableAllFields() {
        ["district", "laggi", "acre", "dismil", "hectare"].forEach(f => {
            const el = document.getElementById(f);
            if (el) el.disabled = true;
        });
        document.getElementById("calcBtn").disabled = true;
    }

    function enableFields() {
        const division = document.getElementById("division").value;
        const district = document.getElementById("district").value;
        if (division && district) {
            ["laggi", "acre", "dismil", "hectare"].forEach(f => {
                const el = document.getElementById(f);
                if (el) el.disabled = false;
            });
            checkCalculateButton();
        }
    }

    function updateDistricts() {
        const divName = document.getElementById("division").value;
        const distSelect = document.getElementById("district");
        distSelect.innerHTML = '<option value="">‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç</option>';
        
        if (divName && biharData[divName]) {
            Object.keys(biharData[divName]).forEach(dist => {
                let opt = document.createElement("option");
                opt.value = dist;
                opt.textContent = dist;
                distSelect.appendChild(opt);
            });
            distSelect.disabled = false;
        } else {
            distSelect.disabled = true;
            disableAllFields();
        }
        enableFields();
    }

    function setupLaggiList() {
        const laggiSelect = document.getElementById("laggi");
        laggiSelect.innerHTML = '';
        for(let l = 4; l <= 12; l += 0.25) {
            let opt = document.createElement("option");
            let val = parseFloat(l.toFixed(2));
            opt.value = val;
            opt.textContent = val + " ‡§π‡§æ‡§•" + (val === 6.5 ? " (‡§Æ‡§æ‡§®‡§ï)" : "");
            if(val === 6.5) opt.selected = true;
            laggiSelect.appendChild(opt);
        }
    }

    function autoSetLaggi() {
        const divName = document.getElementById("division").value;
        const distName = document.getElementById("district").value;
        if(divName && distName && biharData[divName] && biharData[divName][distName]) {
            document.getElementById("laggi").value = biharData[divName][distName];
            showSuccess(`‡§ú‡§ø‡§≤‡§æ "${distName}" ‡§ö‡•Å‡§®‡§æ ‡§ó‡§Ø‡§æ, ‡§≤‡§ó‡•ç‡§ó‡•Ä: ${biharData[divName][distName]} ‡§π‡§æ‡§•`);
            enableFields();
        }
    }

    function checkCalculateButton() {
        const acre = parseFloat(document.getElementById("acre").value) || 0;
        const dismil = parseFloat(document.getElementById("dismil").value) || 0;
        const hectare = parseFloat(document.getElementById("hectare").value) || 0;
        const division = document.getElementById("division").value;
        const district = document.getElementById("district").value;
        
        document.getElementById("calcBtn").disabled = !(division && district && (acre > 0 || dismil > 0 || hectare > 0));
    }

    function validateInputs() {
        if (!document.getElementById("division").value || !document.getElementById("district").value) {
            showError("‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§Æ‡§Ç‡§°‡§≤ ‡§î‡§∞ ‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç");
            return false;
        }
        const acre = parseFloat(document.getElementById("acre").value) || 0;
        const dismil = parseFloat(document.getElementById("dismil").value) || 0;
        const hectare = parseFloat(document.getElementById("hectare").value) || 0;
        if (acre < 0 || dismil < 0 || hectare < 0) {
            showError("‡§ã‡§£‡§æ‡§§‡•ç‡§Æ‡§ï ‡§Æ‡§æ‡§® ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç");
            return false;
        }
        if (acre === 0 && dismil === 0 && hectare === 0) {
            showError("‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡•ã‡§à ‡§Æ‡§æ‡§® ‡§°‡§æ‡§≤‡•á‡§Ç");
            return false;
        }
        hideError();
        return true;
    }

    function calculateWithLoader() {
        if (!validateInputs()) return;
        
        const calcBtn = document.getElementById("calcBtn");
        const spinner = document.getElementById("loadingSpinner");
        
        calcBtn.disabled = true;
        spinner.style.display = 'block';
        
        setTimeout(() => {
            calculate();
            calcBtn.disabled = false;
            spinner.style.display = 'none';
        }, 500);
    }

    function breakdownDhur(totalDhur) {
        let bigha = Math.floor(totalDhur / 400);
        let remainingDhur = totalDhur % 400;
        let kattha = Math.floor(remainingDhur / 20);
        let justDhur = remainingDhur % 20;
        let dhur = Math.floor(justDhur);
        let dhurki = Math.round((justDhur - dhur) * 20);

        if (dhurki >= 20) { dhur += 1; dhurki = 0; }
        if (dhur >= 20) { kattha += 1; dhur = 0; }
        if (kattha >= 20) { bigha += 1; kattha = 0; }

        let resArray = [];
        if(bigha > 0) resArray.push(`${bigha} ‡§¨‡•Ä‡§ò‡§æ`);
        if(kattha > 0) resArray.push(`${kattha} ‡§ï‡§ü‡•ç‡§†‡§æ`);
        if(dhur > 0) resArray.push(`${dhur} ‡§ß‡•Å‡§∞`);
        if(dhurki > 0) resArray.push(`${dhurki} ‡§ß‡•Å‡§∞‡§ï‡•Ä`);

        return resArray.length > 0 ? resArray.join(", ") : "0 ‡§ß‡•Å‡§∞";
    }

    function calculate() {
        const acre = parseFloat(document.getElementById("acre").value) || 0;
        const laggi = parseFloat(document.getElementById("laggi").value);
        const district = document.getElementById("district").value;
        const division = document.getElementById("division").value;

        const totalSqFt = acre * unitConversions.acreToSqft;
        const oneDhurSqFt = Math.pow(laggi * 1.5, 2);
        let totalDhur = totalSqFt / oneDhurSqFt;
        
        const finalStr = breakdownDhur(totalDhur);
        
        // Display Laggi Info
        document.getElementById("displayLaggi").innerText = laggi.toFixed(2);
        document.getElementById("oneDhurDisplay").innerText = `1 ‡§ß‡•Å‡§∞ = ${oneDhurSqFt.toFixed(2)} ‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü`;
        
        // Main Results
        document.getElementById("output").style.display = "block";
        document.getElementById("final-res").innerText = finalStr;
        document.getElementById("res-sqft").innerText = totalSqFt.toLocaleString(undefined, {maximumFractionDigits: 2});
        document.getElementById("res-dismil").innerText = (totalSqFt / 435.6).toFixed(2);
        document.getElementById("res-acre").innerText = acre.toFixed(4);
        document.getElementById("res-hectare").innerText = (acre / unitConversions.hectareToAcre).toFixed(4);
        
        // Detailed Breakdown
        document.getElementById("detailedBreakdown").innerHTML = `üèÜ ‡§™‡•à‡§Æ‡§æ‡§á‡§∂: ${finalStr}`;
        
        // Additional Units
        showAllUnitResults(totalSqFt);
        
        // Save to History
        saveToHistory(`${division} - ${district}: ${finalStr}`, totalSqFt, laggi, finalStr);
        showSuccess("‡§ó‡§£‡§®‡§æ ‡§™‡•Ç‡§∞‡•Ä ‡§π‡•Å‡§à");
        
        document.getElementById('output').scrollIntoView({ behavior: 'smooth' });
    }

    function showAllUnitResults(totalSqFt) {
        const conversions = {
            "‡§µ‡§∞‡•ç‡§ó ‡§Æ‡•Ä‡§ü‡§∞": (totalSqFt / 10.7639).toFixed(2),
            "‡§µ‡§∞‡•ç‡§ó ‡§ó‡§ú": (totalSqFt / 9).toFixed(2),
            "‡§¨‡•Ä‡§ò‡§æ (UP)": (totalSqFt / 17424).toFixed(2),
            "‡§¨‡•Ä‡§ò‡§æ (‡§∞‡§æ‡§ú.)": (totalSqFt / 27225).toFixed(2)
        };
        
        let html = '';
        Object.entries(conversions).forEach(([unit, value]) => {
            html += `<div class="stat-item"><div class="stat-label">${unit}</div><div><span class="stat-value">${value}</span></div></div>`;
        });
        document.getElementById("unitResults").innerHTML = html;
    }

    function convertFromAcre() {
        const acre = parseFloat(document.getElementById("acre").value) || 0;
        if (acre > 0) {
            document.getElementById("dismil").value = (acre * 100).toFixed(2);
            document.getElementById("hectare").value = (acre / unitConversions.hectareToAcre).toFixed(4);
        } else {
            document.getElementById("dismil").value = "";
            document.getElementById("hectare").value = "";
        }
        checkCalculateButton();
    }

    function convertFromDismil() {
        const dismil = parseFloat(document.getElementById("dismil").value) || 0;
        if (dismil > 0) {
            const acre = dismil / 100;
            document.getElementById("acre").value = acre.toFixed(4);
            document.getElementById("hectare").value = (acre / unitConversions.hectareToAcre).toFixed(4);
        } else {
            document.getElementById("acre").value = "";
            document.getElementById("hectare").value = "";
        }
        checkCalculateButton();
    }

    function convertFromHectare() {
        const hectare = parseFloat(document.getElementById("hectare").value) || 0;
        if (hectare > 0) {
            const acres = hectare * unitConversions.hectareToAcre;
            document.getElementById("acre").value = acres.toFixed(2);
            document.getElementById("dismil").value = (acres * 100).toFixed(2);
        } else {
            document.getElementById("acre").value = "";
            document.getElementById("dismil").value = "";
        }
        checkCalculateButton();
    }

    function quickConvert(value, type) {
        switch(type) {
            case 'acre':
                document.getElementById("acre").value = value;
                convertFromAcre();
                break;
            case 'bigha_up':
                document.getElementById("acre").value = value * 0.4;
                convertFromAcre();
                break;
            case 'bigha_raj':
                document.getElementById("acre").value = value * 0.625;
                convertFromAcre();
                break;
            case 'hectare':
                document.getElementById("hectare").value = value;
                convertFromHectare();
                break;
        }
        showSuccess("‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§∞‡•Ç‡§™‡§æ‡§Ç‡§§‡§∞‡§£ ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ");
    }

    function saveToHistory(result, sqft, laggi, breakdown) {
        const time = new Date().toLocaleTimeString('hi-IN', { hour: '2-digit', minute: '2-digit' });
        const date = new Date().toLocaleDateString('hi-IN');
        const timestamp = new Date().toISOString();
        
        historyData.unshift({ 
            timestamp, time, date, result, 
            sqft: sqft.toLocaleString(undefined, {maximumFractionDigits: 2}), 
            laggi: laggi.toFixed(2),
            breakdown: breakdown,
            division: document.getElementById("division").value,
            district: document.getElementById("district").value
        });
        
        if(historyData.length > MAX_HISTORY) historyData = historyData.slice(0, MAX_HISTORY);
        saveHistory();
        renderHistory();
        updateHistoryCount();
    }

    function renderHistory() {
        const list = document.getElementById('historyList');
        if(historyData.length === 0) {
            list.innerHTML = `<div style="text-align: center; padding: 40px; background: rgba(255,255,255,0.6); border-radius: 24px;">
                <span style="font-size: 48px;">üìù</span>
                <p style="margin-top: 12px; font-weight: 600;">‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§ó‡§£‡§®‡§æ ‡§®‡§π‡•Ä‡§Ç</p>
                <p style="font-size: 13px; margin-top: 8px; color: #64748b;">‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ</p>
            </div>`;
            return;
        }
        
        list.innerHTML = historyData.map(item => `
            <div class="history-item" onclick='loadHistoryItem(${JSON.stringify(item).replace(/'/g, "&apos;")})'>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; flex-wrap:wrap; gap:8px;">
                    <div style="background:#f1f5f9; padding:5px 14px; border-radius:30px; font-size:12px; color:#475569;">
                        üïí ${item.time} | ${item.date}
                    </div>
                    <div style="display:flex; gap:8px;">
                        <span style="background:#e0e7ff; color:#4f46e5; padding:5px 16px; border-radius:30px; font-size:12px; font-weight:700;">
                            ${item.district}
                        </span>
                    </div>
                </div>
                <div style="background:#f8fafc; padding:12px; border-radius:16px; margin-bottom:12px;">
                    <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:8px;">
                        <span style="font-weight:600; color:#0f172a;">‡§≤‡§ó‡•ç‡§ó‡•Ä: ${item.laggi} ‡§π‡§æ‡§•</span>
                        <span style="background:#4f46e5; color:white; padding:4px 16px; border-radius:40px; font-weight:700; font-size:15px;">
                            ${item.breakdown || item.result}
                        </span>
                    </div>
                </div>
                <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px;">
                    <div style="background:#f1f5f9; padding:8px; border-radius:12px; text-align:center;">
                        <span style="display:block; font-size:10px; color:#64748b;">‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü</span>
                        <span style="font-weight:700; color:#0f172a;">${item.sqft}</span>
                    </div>
                    <div style="background:#f1f5f9; padding:8px; border-radius:12px; text-align:center;">
                        <span style="display:block; font-size:10px; color:#64748b;">‡§°‡§ø‡§∏‡§Æ‡§ø‡§≤</span>
                        <span style="font-weight:700; color:#0f172a;">${(parseFloat(item.sqft.replace(/,/g, '')) / 435.6).toFixed(2)}</span>
                    </div>
                    <div style="background:#f1f5f9; padding:8px; border-radius:12px; text-align:center;">
                        <span style="display:block; font-size:10px; color:#64748b;">‡§è‡§ï‡§°‡§º</span>
                        <span style="font-weight:700; color:#0f172a;">${(parseFloat(item.sqft.replace(/,/g, '')) / 43560).toFixed(4)}</span>
                    </div>
                </div>
            </div>
        `).join('');
    }

    function loadHistoryItem(item) {
        if (typeof item === 'string') item = JSON.parse(item);
        document.getElementById("division").value = item.division || "";
        updateDistricts();
        setTimeout(() => {
            document.getElementById("district").value = item.district || "";
            autoSetLaggi();
            showSuccess("‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§∏‡•á ‡§≤‡•ã‡§° ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ");
        }, 100);
    }

    function clearHistory() {
        if (confirm("‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§∏‡§≠‡•Ä ‡§ó‡§£‡§®‡§æ ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) {
            historyData = [];
            saveHistory();
            renderHistory();
            updateHistoryCount();
            showSuccess("‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§∏‡§æ‡§´‡§º ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ");
        }
    }

    function updateHistoryCount() {
        document.getElementById('historyCount').textContent = historyData.length;
    }

    function toggleHistory() {
        const content = document.getElementById('historyContent');
        const icon = document.getElementById('historyIcon');
        const isVisible = content.style.display === "block";
        content.style.display = isVisible ? "none" : "block";
        icon.innerText = isVisible ? "‚ñº" : "‚ñ≤";
    }

    function resetAll() {
        document.getElementById("division").value = "";
        document.getElementById("district").innerHTML = '<option value="">‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç</option>';
        document.getElementById("laggi").value = 6.5;
        document.getElementById("acre").value = "";
        document.getElementById("dismil").value = "";
        document.getElementById("hectare").value = "";
        document.getElementById("output").style.display = "none";
        document.getElementById("unitResults").innerHTML = "";
        document.getElementById("detailedBreakdown").innerHTML = "";
        disableAllFields();
        hideError(); 
        hideSuccess();
    }

    function shareOnWhatsApp() {
        const res = document.getElementById("final-res").innerText;
        const sqft = document.getElementById("res-sqft").innerText;
        const district = document.getElementById("district").value;
        const laggi = document.getElementById("laggi").value;
        const text = `üìè *‡§¨‡§ø‡§π‡§æ‡§∞ ‡§≠‡•Ç‡§Æ‡§ø ‡§™‡•à‡§Æ‡§æ‡§á‡§∂*\n\nüìç *‡§ú‡§ø‡§≤‡§æ:* ${district}\nü™µ *‡§≤‡§ó‡•ç‡§ó‡•Ä:* ${laggi} ‡§π‡§æ‡§•\n‚úÖ *‡§™‡§∞‡§ø‡§£‡§æ‡§Æ:* ${res}\nüìê ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤: ${sqft} ‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü\n\n_Generated by Bihar Land Calculator_`;
        window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(text)}`, '_blank');
    }

    function downloadImage() {
        const element = document.getElementById("output");
        const originalBg = element.style.background;
        element.style.background = "#ffffff";
        
        html2canvas(element, { scale: 2, backgroundColor: '#ffffff' }).then(canvas => {
            const link = document.createElement('a');
            link.download = `Bihar_Land_${new Date().getTime()}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
            element.style.background = originalBg;
            showSuccess("‡§á‡§Æ‡•á‡§ú ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§à");
        }).catch(() => {
            showError("‡§á‡§Æ‡•á‡§ú ‡§∏‡•á‡§µ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•Å‡§à");
            element.style.background = originalBg;
        });
    }

    function showError(message) {
        document.getElementById("errorText").textContent = message;
        document.getElementById("errorMsg").style.display = "flex";
        setTimeout(hideError, 5000);
    }
    function hideError() { document.getElementById("errorMsg").style.display = "none"; }
    function showSuccess(message) {
        document.getElementById("successText").textContent = message;
        document.getElementById("successMsg").style.display = "flex";
        setTimeout(hideSuccess, 3000);
    }
    function hideSuccess() { document.getElementById("successMsg").style.display = "none"; }

    function setupEventListeners() {
        ['acre', 'dismil', 'hectare'].forEach(f => {
            document.getElementById(f).addEventListener('input', checkCalculateButton);
        });
        document.getElementById('laggi').addEventListener('change', checkCalculateButton);
    }
</script>
</body>
</html>